
<div class="container">
    <div class="row mb-3">
        <div class="col-md-12">
            <h3 class="text-center text-white">All Flight Books</h3>
        </div>
    </div>

    <div class="card mb-3">
        <div class="card-body">
            <h5 class="card-title text-center font-weight-bold">Flight Information</h5>
            <div class="row text-center">
                <div class="col-md-2">
                    <p class="pBold font-weight-bold mb-0 ">Flight ID</p>
                    <p>{{flight?.id}}</p>
                </div>
                <div class="col-md-3">
                    <p class="pBold font-weight-bold mb-0 ">Flight Title</p>
                    <p>{{flight?.Title}}</p>
                </div>
                <div class="col-md-2">
                    <p class="pBold font-weight-bold mb-0 ">Source</p>
                    <p>{{flight?.from}}</p>
                </div>
                <div class="col-md-3">
                    <p class="pBold font-weight-bold mb-0 ">Destination</p>
                    <p>{{flight?.to}}</p>
                </div>
                <div class="col-md-2">
                    <p class="pBold font-weight-bold mb-0 ">Price</p>
                    <p>{{flight?.price}}</p>
                </div>
            </div>
        </div>
    </div>


    <div class="row mb-3">
        <div class="col-md-6">
            <div class="card bg-success text-white text-center">
                <div class="custom-card1 card-body">
                    <h5 class="card-title"><i class="fas fa-plane"></i> Total Tickets</h5>
                    <p class="pBold card-text">{{nTickets}}</p>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card bg-warning text-white text-center">
                <div class="custom-card2 card-body">
                    <h5 class="card-title"><i class="fas fa-building"></i> Total Price</h5>
                    <p class="pBold card-text">{{totalPrice}}</p>
                </div>
            </div>
        </div>
    </div>


    <div class="table-responsive">
        <table class="table table-bordered table-hover">
            <thead>
                <tr>

                    <th class="text-center">ID</th>
                    <th class="text-center">USER</th>
                    <th class="text-center">nTickets</th>
                    <th class="text-center">SelectedCabin</th>
                    <th class="text-center">TotalPrice</th>
                    <th class="text-center">Actions</th>
                </tr>
            </thead>
            <tbody>

                <tr *ngFor="let ticket of tickets; let i = index">
                    <td class="text-center">{{ ticket.id }}</td>
                    <td class="text-center">
                        <a routerLink="/admin/flights/tickets/user/{{ticket.user_id}}">{{ ticket.user_id }}</a>
                    </td>
                    <td class="text-center">{{ ticket.NumberOfTickets }}</td>
                    <td class="text-center">{{ ticket.selectedCabin }}</td>
                    <td class="text-center">{{ ticket.TotalPrice }}</td>

                    <td class="text-center">
                        <div class="dropdown">
                            <button class="btn btn-secondary dropdown-toggle" type="button" aria-haspopup="true" aria-expanded="false" (click)="toggleDropdown(i)">
                                -------------------
                            </button>
                            <div class="dropdown-menu" [ngClass]="{ 'show': isDropdownOpen && openDropdownIndex === i }">
                                <a class="dropdown-item" (click)="deleteTicket(ticket.id)">Delete Book</a>
                            </div>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<div class="popup" id="popup" #myElementRef>
    <img src="/assets/utils/deleted.png">
    <h2>Book Deleted Successfully</h2>
</div>